<div
  (mouseenter)="componentHovered()"
  (mouseleave)="componentUnHovered()"
  class="code-block-wrapper col-lg-12 col-md-12 col-xs-12">

  <div class="block-metadata col-xs-12 col-lg-12 col-md-12">
    <div class="block-actions col-lg-12 col-md-12 col-xs-12">
      <div
        [style.visibility]="(componentState.hovered) ? 'visible' : 'hidden'"
        class="block-action col-lg-1 col-md-1 col-xs-1">

        <div class="icon-group">
          <i (click)="remove()" class="icon remove-icon" [ngClass]="icons.remove"></i>
        </div>

      </div>

      <div
        [style.visibility]="(componentState.hovered) ? 'visible' : 'hidden'"
        class="block-action col-lg-1 col-md-1 col-xs-1">

        <i
          (click)="onReadonlyChange()"
          [ngClass]="{'fa-eye': componentState.readonly === false, 'fa-eye-slash': componentState.readonly}"
          class="fas icon readonly-icon"
          [matTooltip]="(componentState.readonly) ? 'Mark as editable' : 'Mark as readonly'">
        </i>
      </div>

      <div
        [style.visibility]="(componentState.hovered) ? 'visible' : 'hidden'"
        class="block-action col-lg-1 col-md-1 col-xs-1">

        <i
          (click)="onGithubGist()"
          class="icon fab fa-github"
          matTooltip="Embed Github gist">
        </i>
      </div>

      <div
        *ngIf="componentState.isGist"
        [style.visibility]="(componentState.hovered) ? 'visible' : 'hidden'"
        class="block-action col-lg-1 col-md-1 col-xs-1">

        <i
          (click)="onRefresh()"
          class="icon fas fa-sync-alt"
          matTooltip="Refresh gist">
        </i>
      </div>
    </div>
  </div>

  <div
    class="code-block col-lg-12 col-md-12 col-xs-12 editor-wrapper">

    <ngx-gist *ngIf="componentState.isGist" [gistId]="componentState.gistData.username + '/' + componentState.gistData.gistId"></ngx-gist>

    <ngx-monaco-editor
      *ngIf="componentState.isCode"
      [options]="componentState.editorOptions"
      [(ngModel)]="componentState.code"
      (keyup)="onCodeChange()">
    </ngx-monaco-editor>

    <div
      [style.visibility]="(componentState.hovered) ? 'visible' : 'hidden'"
      *ngIf="componentState.isCode"
      class="test-run-button-wrapper">

      <i *ngIf="componentState.isCodeRunning" class="fas fa-atom fa-spin"></i>

      <button
        [disabled]="componentState.isCodeRunning"
        (click)="onRunCode()"
        class="btn btn-success test-run-button">
        Test run
      </button>
    </div>


  </div>

  <cms-block-info
    [readOnly]="componentState.readonly"
    [isGist]="componentState.isGist"
    [isCode]="componentState.isCode">
  </cms-block-info>

  <cms-test-run-result
    *ngIf="componentState.hasTestRunWindow"
    (testRunCloseEvent)="onTestRunWindowClose()">
  </cms-test-run-result>
</div>
